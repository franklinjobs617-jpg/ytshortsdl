<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Core Tech Stack -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <meta name="theme-color" content="#EF4444">
    <title>YouTube Shorts Download Formats: MP4 vs WebM vs MP3 | Complete Guide 2024</title>
    <meta name="description"
        content="Understand YouTube Shorts download formats (MP4, WebM, MP3) with resolutions from 256p to 1080p. Choose the best format for your use case—content creation, sharing, or offline playback.">
    <meta name="keywords"
        content="YouTube Shorts download formats, MP4 vs WebM, YouTube Shorts MP3 download, 1080p YouTube Shorts download, YouTube Shorts audio extract">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ytshortsdl.net/">
    <meta property="og:image" content="https://ytshortsdl.net/images/ytshortsdl-youtube-video-mp3-downloader.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free YouTube Shorts Downloader | HD, MP4, MP3 & AI Tools">
    <meta name="twitter:description" content="Download YouTube Shorts (MP4/MP3) instantly. No ads. With AI tools.">
    <meta name="twitter:image" content="https://ytshortsdl.net/images/ytshortsdl-youtube-video-mp3-downloader.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <link href="/dist/output.css" rel="stylesheet">
    <!-- Font Library -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700;800&display=swap"
        rel="stylesheet">
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "u5xi8vjmmq");
    </script>

    <meta name="google-adsense-account" content="ca-pub-3383070348689557">

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3383070348689557"
        crossorigin="anonymous"></script>
</head>

<body class="antialiased font-inter bg-white">

    <!-- Header -->
    <header class="py-4 px-6 md:px-12 sticky top-0 bg-white/80 backdrop-blur-xl z-50 border-b border-slate-200/80">
        <nav class="flex justify-between items-center max-w-7xl mx-auto">
            <a href="/" class="text-2xl font-bold font-poppins flex-shrink-0 flex items-center gap-2">
                <img src="/ytshortsdl-logo.webp" alt="ytshortsdl logo" class="w-12 h-12" width="48" height="48">
                <span>
                    YTShorts<span class="text-red-600">dl</span>.net
                </span>
            </a>

            <div class="hidden md:flex items-center space-x-8">

                <a href="/index.html" class="font-medium text-red-500 transition-colors duration-300"
                    data-i18n="title">Download
                    Shorts</a>
                <a href="/shorts-to-mp3.html"
                    class="font-medium text-slate-600 hover:text-red-500 transition-colors duration-300">MP3 Audio</a>

                <div class="relative group">
                    <button
                        class="font-medium text-slate-600 hover:text-red-500 transition-colors duration-300 flex items-center gap-2">
                        <span>AI Tools</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"
                            class="h-4 w-4 transition-transform duration-300 group-hover:rotate-180"
                            fill="currentColor">
                            <path
                                d="M297.4 470.6C309.9 483.1 330.2 483.1 342.7 470.6L534.7 278.6C547.2 266.1 547.2 245.8 534.7 233.3C522.2 220.8 501.9 220.8 489.4 233.3L320 402.7L150.6 233.4C138.1 220.9 117.8 220.9 105.3 233.4C92.8 245.9 92.8 266.2 105.3 278.7L297.3 470.7z" />
                        </svg>

                    </button>
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 mt-3 w-64 bg-white rounded-lg shadow-xl ring-1 ring-slate-900/5 p-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform group-hover:translate-y-0 -translate-y-2">
                        <a href="/no-watermark.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Watermark
                            Remover</a>
                        <a href="/4k-shorts-downloader.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">4K
                            Shorts Downloader</a>
                        <a href="/shorts-thumbnail-tool.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Shorts
                            Thumbnail Tool</a>
                    </div>
                </div>

                <div class="relative group">
                    <button
                        class="font-medium text-slate-600 hover:text-red-500 transition-colors duration-300 flex items-center gap-2">
                        <span>Guide</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                            class="h-4 w-4 transition-transform duration-300 group-hover:rotate-180"
                            fill="currentColor">
                            <path
                                d="M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
                        </svg>
                    </button>
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 mt-3 w-64 bg-white rounded-lg shadow-xl ring-1 ring-slate-900/5 p-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform group-hover:translate-y-0 -translate-y-2">
                        <a href="/guide/chrome-extension.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Chrome
                            Extension</a>
                        <a href="/guide/iphone-downloader.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">iPhone
                            Downloader</a>
                        <a href="/guide/latest-shorts-tool.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Latest
                            Shorts Tool</a>
                        <a href="/guide/shorts-to-mp3-tutorial.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Shorts
                            To MP3 Tutorial</a>
                        <a href="/guide/shorts-without-watermark.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Shorts
                            Without Watermark</a>
                        <a href="/best-shorts-downloader-apps.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Best
                            Shorts Downloader Apps</a>
                        <a href="/shorts-creators-reddit-insights.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Shorts
                            Creators Reddit Insights</a>


                    </div>
                </div>

                <a href="/pricing.html"
                    class="font-medium text-slate-600 hover:text-red-500 transition-colors duration-300">Pricing</a>

                <div class="relative group">
                    <button
                        class="font-medium text-slate-600 hover:text-red-500 transition-colors duration-300 flex items-center gap-2">
                        <span>Legal</span>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                            class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180"
                            fill="currentColor">
                            <path
                                d="M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z" />
                        </svg>
                    </button>
                    <div
                        class="absolute top-full left-1/2 -translate-x-1/2 mt-3 w-48 bg-white rounded-lg shadow-xl ring-1 ring-slate-900/5 p-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform group-hover:translate-y-0 -translate-y-2">
                        <a href="/privacy.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Privacy
                            Policy</a>
                        <a href="/terms.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Terms
                            of Service</a>
                        <a href="/shorts-reuse-guide.html"
                            class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">Shorts
                            Reuse Guide</a>
                            
                <a href="/about.html"
                    class="block w-full text-left px-4 py-2 rounded-md text-slate-700 hover:bg-slate-100 hover:text-red-500">About</a>
                    </div>
                </div>


                <a href="/addon.html"
                    class="font-medium text-slate-600 hover:text-red-500 transition-colors duration-300">Add-On</a>

            </div>

            <button id="mobile-menu-button" class="md:hidden text-2xl text-slate-600" aria-label="Open menu"
                aria-controls="mobile-drawer" aria-expanded="false">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-6 h-6" fill="currentColor">
                    <path
                        d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z" />
                </svg>
            </button>
        </nav>
    </header>

    <!-- Mobile Drawer & Backdrop -->
    <div id="mobile-drawer-backdrop"
        class="fixed inset-0 bg-black/40 transition-opacity backdrop-hidden z-50 md:hidden">
    </div>
    <aside id="mobile-drawer"
        class="fixed top-0 right-0 h-full w-80 max-w-[80%] bg-white shadow-2xl translate-x-full transition-transform z-50 md:hidden overflow-scroll invisible"
        aria-hidden="true">
        <div class="p-4 border-b border-slate-200 flex items-center justify-between">
            <span class="text-xl font-semibold">Menu</span>
            <button id="mobile-menu-close" class="text-2xl text-slate-600" aria-label="Close menu">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="w-4 h-4" fill="currentColor">
                    <path
                        d="M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z" />
                </svg>
            </button>
        </div>
        <nav class="p-6 space-y-4 bg-white min-h-screen">
            <a href="/index.html" class="block font-medium text-red-500">Download Shorts</a>
            <a href="/shorts-to-mp3.html" class="block font-medium text-slate-600">MP3 Audio</a>
            <div>
                <div class="text-slate-500 text-xs uppercase tracking-wider mb-2">AI Tools</div>
                <a href="/no-watermark.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Watermark Remover</a>
                <a href="/4k-shorts-downloader.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">4K Shorts Downloader</a>
                <a href="/shorts-thumbnail-tool.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Shorts Thumbnail Tool</a>
            </div>

            <div>
                <div class="text-slate-500 text-xs uppercase tracking-wider mb-2">Guide</div>
                <a href="/guide/chrome-extension.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Chrome Extension</a>
                <a href="/guide/iphone-downloader.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">iPhone Downloader</a>
                <a href="/guide/latest-shorts-tool.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Latest Shorts Tool</a>
                <a href="/guide/shorts-to-mp3-tutorial.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Shorts
                    To MP3 Tutorial</a>
                <a href="/guide/shorts-without-watermark.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Shorts
                    Without Watermark</a>
                <a href="/best-shorts-downloader-apps.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Best
                    Shorts Downloader Apps</a>
                <a href="/shorts-creators-reddit-insights.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Shorts
                    Creators Reddit Insights</a>
            </div>

            <a href="/pricing.html" class="block font-medium text-slate-600">Pricing</a>
            <div>
                <div class="text-slate-500 text-xs uppercase tracking-wider mb-2">Legal</div>
                <a href="/privacy.html" class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Privacy
                    Policy</a>
                <a href="/terms.html" class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Terms of
                    Service</a>
                <a href="/shorts-reuse-guide.html"
                    class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">Shorts Reuse Guide</a>
                <a href="/about.html" class="block px-2 py-2 rounded-md text-slate-700 hover:bg-slate-100">About</a>

            </div>
            <a href="/addon.html" class="block font-medium text-slate-600">Add-On</a>
        </nav>
    </aside>



    <!-- Main Content -->
    <main>
        <!-- Article container with max-width, padding, and centered -->
        <article class="max-w-4xl mx-auto px-4 sm:px-6 py-12 md:py-16">

            <h1 class="text-3xl md:text-4xl font-bold font-poppins text-slate-800 mb-2">YouTube Shorts Download Formats
                Explained: MP4, WebM, MP3 & Resolutions Guide</h1>

            <div class="text-sm text-slate-500 mb-8 border-b border-slate-200 pb-4">
                Published on: ytshortsdl.net | Updated on: 2025-11-10 | Author:
                Jade
            </div>

            <p class="text-lg text-slate-600 leading-relaxed mb-8">Are you confused about which YouTube Shorts download
                format to choose? With options ranging from MP4 and
                WebM to audio-only MP3, and resolutions from 256p to 1080p, picking the right one depends on your use
                case—whether it’s offline playback, social media sharing, or content repurposing. This guide breaks down
                every format available on ytshortsdl.net, so you can make informed decisions.</p>

            <section>
                <h2
                    class="text-2xl md:text-3xl font-bold font-poppins text-slate-800 mt-12 mb-6 border-b border-slate-200 pb-3">
                    1. Key YouTube Shorts Download Formats Available</h2>
                <p class="text-slate-600 leading-relaxed mb-6">ytshortsdl.net offers three core format categories to
                    suit different needs. Below is a detailed
                    breakdown of each, including file types, quality, and ideal use cases.</p>

                <h3 class="text-xl font-semibold font-poppins text-slate-700 mt-8 mb-4">1.1 Video Formats: MP4 (Most
                    Popular)</h3>
                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">
                    <p class="mb-2"><strong class="font-semibold text-slate-700">File Extension:</strong> .mp4 | <strong
                            class="font-semibold text-slate-700">Supported Resolutions:</strong> 256p (144x256) to
                        1080p (1080x1920) | <strong class="font-semibold text-slate-700">File Sizes:</strong> 0.92 MB –
                        8.33 MB</p>
                    <p class="mb-0 text-slate-600">MP4 is the universal video format, compatible with every device (iOS,
                        Android, PC, Mac) and
                        platform (TikTok, Instagram, WhatsApp). It balances quality and file size, making it the top
                        choice for most users.</p>
                </div>
                <p class="text-slate-600 leading-relaxed mb-6">As a content creator who’s repurposed 100+ YouTube Shorts
                    for TikTok and Instagram, MP4 has been my saving grace. Last month, I tried sharing a WebM file with
                    a client—and their old Android phone couldn’t play it! MP4 works everywhere: my iPhone, laptop,
                    editing software (CapCut/Premiere Pro), and even my grandma’s tablet. The compression is spot-on
                    too—1080p MP4s look crisp but don’t hog storage, which is huge when I’m downloading 10+ Shorts a day
                    for my content calendar. – Expand on
                    compression, compatibility, and why it’s preferred
                    for cross-device use.</p>

                <h3 class="text-xl font-semibold font-poppins text-slate-700 mt-8 mb-4">1.2 Video Formats: WebM
                    (Lightweight Alternative)</h3>
                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">
                    <p class="mb-2"><strong class="font-semibold text-slate-700">File Extension:</strong> .webm |
                        <strong class="font-semibold text-slate-700">Supported Resolutions:</strong> 256p (144x256)
                        to 1080p (1080x1920) | <strong class="font-semibold text-slate-700">File Sizes:</strong> 0.25 MB
                        – 5.62 MB
                    </p>
                    <p class="mb-0 text-slate-600">WebM offers smaller file sizes than MP4 at the same resolution, ideal
                        for users with limited
                        storage or slow internet. It’s supported by most modern browsers and devices but may have
                        compatibility gaps with older systems.</p>
                </div>
                <p class="text-slate-600 leading-relaxed mb-6">WebM’s open-source compression is impressive—don’t get me
                    wrong. I use it for quick shares with my team (we all have 2022+ phones/laptops) because downloads
                    are 2x faster on our office Wi-Fi. But the tradeoff is compatibility: I once spent 20 minutes
                    troubleshooting why a WebM wouldn’t play on a client’s Windows 10 laptop (turns out, they needed a
                    codec update). It’s a great option for tech-savvy users, but casual downloaders might find MP4 more
                    hassle-free. – Explain WebM’s
                    open-source nature, compression efficiency,
                    and best-use scenarios.</p>

                <h3 class="text-xl font-semibold font-poppins text-slate-700 mt-8 mb-4">1.3 Audio Formats: MP3 & WebM
                    Audio (Extract Sound)</h3>
                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">
                    <p class="mb-2"><strong class="font-semibold text-slate-700">File Extensions:</strong> .m4a, .webm |
                        <strong class="font-semibold text-slate-700">Bitrates:</strong> ~54k to ~142k |
                        <strong class="font-semibold text-slate-700">File Sizes:</strong> 0.25 MB – 0.65 MB
                    </p>
                    <p class="mb-0 text-slate-600">Audio-only formats let you extract music, speeches, or soundbites
                        from YouTube Shorts. Perfect
                        for podcasts, background music, or offline listening without video.</p>
                </div>
                <div class="text-slate-600 leading-relaxed mb-6 max-w-2xl mx-auto rounded-lg shadow-md">
                    <img src="/images/blog/youtube-shorts-resolution-guide-1080p-vs-640p.jpg"
                        alt="YouTube Shorts Supported" />

                </div>
                <p class="text-slate-600 leading-relaxed mb-6 ">– Compare bitrates, sound quality, and when to choose
                    M4A vs WebM audio.</p>
            </section>

            <section>
                <h2 class=" text-2xl md:text-3xl font-bold font-poppins text-slate-800 mt-12 mb-6 border-b
                    border-slate-200 pb-3">
                    2. Resolution Guide: Which Quality Should You Choose?</h2>
                <p class="text-slate-600 leading-relaxed mb-6">YouTube Shorts are vertical (9:16 aspect ratio), so
                    resolutions are listed as [width]x[height].
                    Here’s how to match resolution to your needs:</p>

                <!-- Responsive table wrapper -->
                <div class="overflow-x-auto shadow-md rounded-lg mb-8">
                    <table class="w-full text-sm text-left text-slate-600">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                <th scope="col" class="px-6 py-4">Resolution</th>
                                <th scope="col" class="px-6 py-4">Dimensions</th>
                                <th scope="col" class="px-6 py-4">File Size Range (MP4)</th>
                                <th scope="col" class="px-6 py-4">Ideal Use Case</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b border-slate-200 hover:bg-slate-50">
                                <td class="px-6 py-4">256p (Low)</td>
                                <td class="px-6 py-4">144x256</td>
                                <td class="px-6 py-4">0.92 MB</td>
                                <td class="px-6 py-4">Low-storage devices, quick sharing, or audio-focused content</td>
                            </tr>
                            <tr class="bg-white border-b border-slate-200 hover:bg-slate-50">
                                <td class="px-6 py-4">426p (Medium-Low)</td>
                                <td class="px-6 py-4">240x426</td>
                                <td class="px-6 py-4">0.94 MB – 1.19 MB</td>
                                <td class="px-6 py-4">Offline playback on phones, slow internet</td>
                            </tr>
                            <tr class="bg-white border-b border-slate-200 hover:bg-slate-50">
                                <td class="px-6 py-4">640p (Medium)</td>
                                <td class="px-6 py-4">360x640</td>
                                <td class="px-6 py-4">1.44 MB – 1.75 MB</td>
                                <td class="px-6 py-4">Everyday use, social media sharing, balanced quality/size</td>
                            </tr>
                            <tr class="bg-white border-b border-slate-200 hover:bg-slate-50">
                                <td class="px-6 py-4">854p (HD)</td>
                                <td class="px-6 py-4">480x854</td>
                                <td class="px-6 py-4">1.87 MB – 2.64 MB</td>
                                <td class="px-6 py-4">Clear playback on tablets, short-form content creation</td>
                            </tr>
                            <tr class="bg-white hover:bg-slate-50">
                                <td class="px-6 py-4">1080p (Full HD)</td>
                                <td class="px-6 py-4">1080x1920</td>
                                <td class="px-6 py-4">1.85 MB – 8.33 MB</td>
                                <td class="px-6 py-4">High-quality repurposing, YouTube/TikTok uploads, large screens
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="text-slate-600 leading-relaxed mb-6 max-w-2xl mx-auto rounded-lg shadow-md">
                    <img src="/images/blog/quality-vs-file-size.jpg" alt="">

                </div>
                <p>
                    – Add insights
                    on when to prioritize quality vs. file size,
                    e.g., "1080p is best for content creators, while 640p works for casual users."
                </p>
            </section>

            <section>
                <h2
                    class="text-2xl md:text-3xl font-bold font-poppins text-slate-800 mt-12 mb-6 border-b border-slate-200 pb-3">
                    3. MP4 vs WebM: Head-to-Head Comparison</h2>
                <p class="text-slate-600 leading-relaxed mb-6">Can’t decide between MP4 and WebM? Here’s a side-by-side
                    breakdown to help you choose:</p>

                <div class="overflow-x-auto shadow-md rounded-lg mb-8">
                    <table class="w-full text-sm text-left text-slate-600">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                <th scope="col" class="px-6 py-4">Feature</th>
                                <th scope="col" class="px-6 py-4">MP4</th>
                                <th scope="col" class="px-6 py-4">WebM</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b border-slate-200 hover:bg-slate-50">
                                <td class="px-6 py-4 font-medium text-slate-800">Compatibility</td>
                                <td class="px-6 py-4">All devices/platforms (iOS, Android, old systems)</td>
                                <td class="px-6 py-4">Modern browsers/devices (limited older support)</td>
                            </tr>
                            <tr class="bg-white border-b border-slate-200 hover:bg-slate-50">
                                <td class="px-6 py-4 font-medium text-slate-800">File Size</td>
                                <td class="px-6 py-4">Larger (e.g., 1080p = 8.33 MB)</td>
                                <td class="px-6 py-4">Smaller (e.g., 1080p = 5.62 MB)</td>
                            </tr>
                            <tr class="bg-white border-b border-slate-200 hover:bg-slate-50">
                                <td class="px-6 py-4 font-medium text-slate-800">Quality</td>
                                <td class="px-6 py-4">Slightly better at same resolution</td>
                                <td class="px-6 py-4">Near-identical to MP4 (minor visual differences)</td>
                            </tr>
                            <tr class="bg-white hover:bg-slate-50">
                                <td class="px-6 py-4 font-medium text-slate-800">Best For</td>
                                <td class="px-6 py-4">Cross-device use, social media sharing</td>
                                <td class="px-6 py-4">Limited storage, fast downloads, web playback</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section>
                <h2
                    class="text-2xl md:text-3xl font-bold font-poppins text-slate-800 mt-12 mb-6 border-b border-slate-200 pb-3">
                    4. Use Case Examples: Which Format to Pick?</h2>

                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">
                    <h3 class="text-lg font-semibold font-poppins text-slate-700 mt-0 mb-2">Scenario 1: You’re a Content
                        Creator Repurposing Shorts</h3>
                    <p class="mb-0 text-slate-600">Choose <strong class="font-semibold text-slate-700">1080p
                            MP4</strong> – maximum quality for editing, rebranding, or uploading to
                        TikTok/Instagram Reels. The universal format ensures no compatibility issues with editing
                        software (Premiere Pro, CapCut).</p>
                </div>

                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">
                    <h3 class="text-lg font-semibold font-poppins text-slate-700 mt-0 mb-2">Scenario 2: You Want to Save
                        Storage on Your Phone</h3>
                    <p class="mb-0 text-slate-600">Opt for <strong class="font-semibold text-slate-700">640p
                            WebM</strong> (video) or <strong class="font-semibold text-slate-700">WebM Audio</strong>
                        (sound only) – smaller
                        files without sacrificing usable quality for casual playback.</p>
                </div>

                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">
                    <h3 class="text-lg font-semibold font-poppins text-slate-700 mt-0 mb-2">Scenario 3: You Need
                        Background Music from a Short</h3>
                    <p class="mb-0 text-slate-600">Select <strong class="font-semibold text-slate-700">M4A
                            Audio</strong> – higher bitrate (~129k) delivers clearer sound than
                        lower-bitrate WebM audio, perfect for podcasts or music playlists.</p>
                </div>

                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">
                    <h3 class="text-lg font-semibold font-poppins text-slate-700 mt-0 mb-2">Scenario 4: You’re Sharing
                        with Someone on an Old Phone</h3>
                    <p class="mb-0 text-slate-600">Go with <strong class="font-semibold text-slate-700">640p
                            MP4</strong> – MP4’s broad compatibility ensures the video plays smoothly on
                        older iOS/Android devices that may not support WebM.</p>
                </div>

                <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6">    
                    <h3 class="text-lg font-semibold font-poppins text-slate-700 mt-0 mb-2">
                        Scenario 5: You Want Maximum File Size Savings for Bulk Downloads
                    </h3>  
                    <p class="mb-0 text-slate-600">Choose <strong class="font-semibold text-slate-700">640p
                            WebM</strong> – WebM’s superior compression at a
                        medium resolution results in the smallest usable video file size, perfect for downloading dozens
                        of Shorts when storage is critical.
                    </p>
                </div>
                – Add 1-2
                more scenarios (e.g., offline viewing on a
                tablet, sharing via WhatsApp) to cover more user needs.</p>
            </section>

            <section>
                <h2
                    class="text-2xl md:text-3xl font-bold font-poppins text-slate-800 mt-12 mb-6 border-b border-slate-200 pb-3">
                    5. FAQ: Common Questions About YouTube Shorts Formats</h2>
                <div class="space-y-6">
                    <div class="border-b border-slate-200 pb-4 last:border-0 last:pb-0">
                        <p class="font-semibold text-slate-800 mb-2">Q: Why is my MP4 file larger than the WebM version
                            at the same resolution?</p>
                        <p class="text-slate-600 leading-relaxed mb-0">A: MP4 uses H.264 compression, which prioritizes
                            compatibility over file size. WebM uses VP9
                            compression, an open-source standard that reduces file size without significant quality
                            loss.
                        </p>
                    </div>

                    <div class="border-b border-slate-200 pb-4 last:border-0 last:pb-0">
                        <p class="font-semibold text-slate-800 mb-2">Q: Can I download 4K YouTube Shorts with
                            ytshortsdl.net?</p>
                        <p class="text-slate-600 leading-relaxed mb-0">A: 4K and 8K downloads are available with our
                            premium subscription. Free users can access up to
                            1080p, which is the standard quality for most YouTube Shorts.</p>
                    </div>

                    <div class="border-b border-slate-200 pb-4 last:border-0 last:pb-0">
                        <p class="font-semibold text-slate-800 mb-2">Q: Is WebM audio better than MP3 for listening?</p>
                        <p class="text-slate-600 leading-relaxed mb-0">A: MP3 (M4A) is more widely compatible with music
                            players and streaming apps. WebM audio is
                            smaller but may require conversion for use on some devices.</p>
                    </div>

                    <div class="border-b border-slate-200 pb-4 last:border-0 last:pb-0">
                        <p class="font-semibold text-slate-800 mb-2">Q: Do higher resolutions mean better quality for
                            Shorts?</p>
                        <p class="text-slate-600 leading-relaxed mb-0">A: Yes, but only if the original Short was
                            uploaded in high quality. Most YouTube Shorts are shot
                            in 1080p, so downloading at 1080p preserves the original clarity.</p>
                    </div>
                </div>
                <div class="border-b border-slate-200 pb-4 last:border-0 last:pb-0">     <p
                        class="font-semibold text-slate-800 mb-2">Q: How do I choose between downloading the video or
                        just the audio?</p>     <p class="text-slate-600 leading-relaxed mb-0">A: If your main need is
                        to watch the visual content or share it on social media, choose a video format. If you are only
                        interested in the background music, sound effects, or a piece of dialogue, opt for an audio
                        format to save significant storage space.</p>
                </div>
            </section>

            <!-- CTA Section -->
            <section class="text-center bg-gradient-to-br from-red-50 to-blue-50 p-8 md:p-12 rounded-2xl my-16">
                <h2 class="text-3xl font-bold font-poppins text-slate-800 mb-4 border-0">Ready to Download YouTube
                    Shorts?</h2>
                <p class="max-w-2xl mx-auto text-slate-600 leading-relaxed mb-6">ytshortsdl.net offers free access to
                    all the formats above – no software installation, no ads, and
                    fast downloads. Upgrade to premium for 4K/8K quality and AI watermark removal.</p>
                <a href="/"
                    class="inline-block bg-red-500 text-white font-bold text-lg px-8 py-3 rounded-lg hover:bg-red-600 transition-all duration-300 transform hover:scale-105 no-underline">Start
                    Downloading Now</a>
            </section>

            <section>
                <h2
                    class="text-2xl md:text-3xl font-bold font-poppins text-slate-800 mt-12 mb-6 border-b border-slate-200 pb-3">
                    Final Tips for Choosing the Right Format</h2>
                <ul class="list-disc list-inside space-y-2 mb-6 pl-2 text-slate-600 [&_li::marker]:text-red-400">
                    <li>Stick to <strong class="font-semibold text-slate-700">MP4</strong> for maximum compatibility
                        across devices and platforms.</li>
                    <li>Choose <strong class="font-semibold text-slate-700">WebM</strong> if you need smaller files or
                        plan to play the video on modern browsers.</li>
                    <li>Opt for <strong class="font-semibold text-slate-700">audio-only</strong> formats when you only
                        need sound (e.g., music, speeches).</li>
                    <li>Use <strong class="font-semibold text-slate-700">1080p</strong> for content creation and <strong
                            class="font-semibold text-slate-700">640p/426p</strong> for casual use/storage savings.</li>
                </ul>
                <p class="text-slate-600 leading-relaxed mb-6">
                    <strong>In conclusion,</strong> the right choice of YouTube Shorts download format is always
                    determined by your specific needs. If <strong>universal compatibility</strong> and <strong>maximum
                        clarity</strong> are your priority, stick with <strong>1080p MP4</strong>. If you are looking to
                    maximize <strong>storage savings</strong> and enjoy faster downloads on modern devices,
                    <strong>WebM</strong> is the most efficient choice. Regardless of your requirements, ytshortsdl.net
                    offers a quick, clean, and reliable way to access every format discussed, empowering you to download
                    your favorite Shorts in the perfect quality and size every time.
                </p>
            </section>
        </article>
    </main>

    <!-- Footer - REBUILT TO MATCH HEADER'S INFORMATION ARCHITECTURE -->
    <!-- Footer - REBUILT TO MATCH HEADER'S INFORMATION ARCHITECTURE -->
    <footer class="bg-slate-800 text-slate-300">
        <div class="container mx-auto px-6 py-16">

            <div class="grid md:grid-cols-5 gap-8">

                <div class="md:col-span-1">
                    <a href="/" class="text-2xl font-bold font-poppins">
                        YTShorts<span class="text-red-500">dl</span>.net
                    </a>
                    <p class="mt-4 text-sm text-slate-400 leading-relaxed">
                        The ultimate tool for creators to download, optimize, and repurpose their YouTube Shorts
                        content. Fast, free, and built with passion.
                    </p>
                </div>

                <div>
                    <h3 class="font-semibold text-white mb-4">Core Tools</h3>
                    <ul class="space-y-3">
                        <li><a href="/index.html" class="hover:text-red-500 transition-colors">Download Shorts</a></li>
                        <li><a href="/shorts-to-mp3.html" class="hover:text-red-500 transition-colors">MP3 Audio</a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-white mb-4">Guide</h3>
                    <ul class="space-y-3">
                        <li><a href="/guide/chrome-extension.html" class="hover:text-red-500 transition-colors">Chrome
                                Extension</a></li>
                        <li><a href="/guide/shorts-to-mp3.html" class="hover:text-red-500 transition-colors">MP3
                                Audio</a></li>
                        <li><a href="/guide/no-watermark.html" class="hover:text-red-500 transition-colors">Watermark
                                Removal</a></li>
                        <li><a href="/guide/shorts-to-mp3-tutorial.html"
                                class="hover:text-red-500 transition-colors">Shorts
                                To MP3 Tutorial</a></li>
                        <li><a href="/guide/shorts-without-watermark.html"
                                class="hover:text-red-500 transition-colors">Shorts
                                Without Watermark</a></li>
                        <li><a href="/best-shorts-downloader-apps.html"
                                class="hover:text-red-500 transition-colors">Best
                                Shorts Downloader Apps</a></li>
                        <li><a href="/shorts-creators-reddit-insights.html"
                                class="hover:text-red-500 transition-colors">Shorts
                                Creators Reddit Insights</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-white mb-4">AI Tools</h3>
                    <ul class="space-y-3">
                        <li><a href="/no-watermark.html" class="hover:text-red-500 transition-colors">Watermark
                                Remover</a></li>
                        <li><a href="/4k-shorts-downloader.html" class="hover:text-red-500 transition-colors">4K Shorts
                                Downloader</a></li>
                        <li><a href="/shorts-thumbnail-tool.html" class="hover:text-red-500 transition-colors">Shorts
                                Thumbnail Tool</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="font-semibold text-white mb-4">Company</h3>
                    <ul class="space-y-3">
                        <li><a href="/addon.html" class="hover:text-red-500 transition-colors">Add-on</a></li>
                        <li><a href="/about.html" class="hover:text-red-500 transition-colors">About & Contact</a></li>
                        <li><a href="/pricing.html" class="hover:text-red-500 transition-colors">Pricing</a></li>
                        <li><a href="/privacy.html" class="hover:text-red-500 transition-colors">Privacy Policy</a></li>
                        <li><a href="/terms.html" class="hover:text-red-500 transition-colors">Terms of Service</a></li>
                        <li><a href="/shorts-reuse-guide.html" class="hover:text-red-500 transition-colors">Shorts Reuse
                                Guide</a></li>
                    </ul>
                </div>

            </div>

            <div class="mt-12 pt-8 border-t border-slate-700 flex flex-col sm:flex-row justify-between items-center">
                <p class="text-sm text-slate-400">&copy; 2025 YTShortsdl.net. All rights reserved.</p>
                <div class="flex space-x-4 mt-4 sm:mt-0">
                    <a href="#" class="text-slate-400 hover:text-red-500 transition-colors"><i
                            class="fab fa-twitter text-xl"></i></a>
                    <a href="#" class="text-slate-400 hover:text-red-500 transition-colors"><i
                            class="fab fa-youtube text-xl"></i></a>
                    <a href="#" class="text-slate-400 hover:text-red-500 transition-colors"><i
                            class="fab fa-github text-xl"></i></a>
                </div>
            </div>

        </div>
    </footer>

    <script>
        // Elements
        const input = document.getElementById('shorts-input');
        const clearInputBtn = document.getElementById('clear-input');
        const downloadButton = document.getElementById('download-btn');
        const resultSection = document.getElementById('result-section');
        const inputError = document.getElementById('input-error');
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenuClose = document.getElementById('mobile-menu-close');
        const mobileDrawer = document.getElementById('mobile-drawer');
        const mobileBackdrop = document.getElementById('mobile-drawer-backdrop');

        // Helpers
        function isValidYouTubeUrl(value) { // Renamed for clarity
            if (!value) return false;
            try {
                const url = new URL(value.trim());
                const host = url.hostname.replace(/^www\./, '');
                return (host === 'youtube.com' || host === 'm.youtube.com' || host === 'youtu.be');
            } catch {
                return false;
            }
        }

        function showError(message) {
            inputError.textContent = message;
            inputError.classList.remove('hidden');
        }
        function clearError() {
            inputError.classList.add('hidden');
        }
        function setLoading(state) {
            if (state) {
                downloadButton.innerHTML = `<i class="fas fa-spinner fa-spin"></i><span>Processing...</span>`;
                downloadButton.disabled = true;
                resultSection.setAttribute('aria-busy', 'true');
            } else {
                downloadButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-6 h-6" fill="currentColor"> <path d="M256 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7-41.4-41.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 242.7 256 32zM64 320c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-46.9 0-56.6 56.6c-31.2 31.2-81.9 31.2-113.1 0L110.9 320 64 320zm304 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg><span>Convert & Download</span>`;
                downloadButton.disabled = false;
                resultSection.setAttribute('aria-busy', 'false');
            }
        }
        function renderSkeleton() {
            return `
        <div class="bg-white rounded-2xl shadow-xl shadow-slate-200/60 p-8 text-left animate-pulse">
            <div class="flex flex-col md:flex-row gap-6 mb-8">
                <div class="w-full md:w-48 h-28 bg-slate-200 rounded-lg"></div>
                <div class="flex-1 space-y-3">
                    <div class="h-6 w-3/4 bg-slate-200 rounded"></div>
                    <div class="h-4 w-1/2 bg-slate-200 rounded"></div>
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-slate-50 p-6 rounded-xl">
                    <div class="h-5 w-48 bg-slate-200 rounded mb-4"></div>
                    <div class="space-y-3">
                        <div class="h-10 bg-slate-200 rounded"></div>
                        <div class="h-10 bg-slate-200 rounded"></div>
                        <div class="h-10 bg-slate-200 rounded"></div>
                         <div class="h-10 bg-slate-200 rounded"></div>
                    </div>
                </div>
                <div class="p-6 rounded-xl border-2 border-slate-200">
                    <div class="h-5 w-56 bg-slate-200 rounded mb-4"></div>
                    <div class="space-y-3">
                        <div class="h-12 bg-slate-200 rounded"></div>
                        <div class="h-12 bg-slate-200 rounded"></div>
                    </div>
                </div>
            </div>
        </div>`;
        }

        function renderResults(data, originalUrl) {
            const { formats, video_info } = data;

            const optionsHtml = formats.map((format, index) => {
                const fileSize = format.filesize_mb ? `${format.filesize_mb.toFixed(2)} MB` : 'N/A';

                const safeTitle = video_info.title.replace(/[<>:"/\\|?*]+/g, '_');
                const resolutionForFilename = format.resolution.includes("Audio") ? "Audio" : format.resolution.split('x')[1] + 'p';
                const downloadFilename = `${safeTitle} (${resolutionForFilename}).${format.ext}`;

                const hiddenClass = index >= 6 ? 'hidden extra-option' : '';

                return `
                    <div class="flex items-center justify-between p-3 bg-white rounded-lg shadow-sm ${hiddenClass}">
                        <div class="font-medium text-slate-700 text-sm truncate pr-2" title="${format.label}">${format.label}</div>
                        <div class="flex items-center gap-3 flex-shrink-0">
                            <span class="text-xs text-slate-500 w-16 text-right">${fileSize}</span>
                            <button class="download-link-btn bg-red-500 text-white font-semibold px-3 py-1.5 rounded-md text-xs hover:bg-red-600 transition-colors w-min"
                                    data-url="${originalUrl.trim()}"
                                    data-format-id="${format.format_id}"
                                    data-title="${video_info.title}"
                                    data-filename="${downloadFilename}">
                                Download
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            return `
            <div class="bg-white px-4 py-8 text-left rounded-2xl">
                <div class="flex flex-col md:flex-row gap-6 mb-8 items-start">
                    <img src="${video_info.thumbnail}" alt="Video thumbnail for ${video_info.title}" class="w-full md:w-48 h-auto rounded-lg object-cover shadow-lg border">
                    <div>
                        <h3 class="text-xl font-bold font-poppins text-slate-800">${video_info.title}</h3>
                        <p class="text-sm text-slate-500 mt-1">by ${video_info.uploader} | Duration: ${video_info.duration_string}</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Left Column: Download Options -->
                    <div class="md:bg-slate-50 md:p-4 md:rounded-xl">
                        <h4 class="font-semibold text-lg mb-4 text-slate-700">Available Formats</h4>
                        <div class="space-y-2" id="download-list">
                           ${optionsHtml}
                        </div>
                        ${formats.length > 6 ? `
                        <div class="text-center mt-4">
                            <button id="toggle-downloads"
                                class="font-semibold text-red-500 hover:text-red-700 transition text-sm">
                                Show all ${formats.length} formats <i class="fas fa-chevron-down text-xs ml-1"></i>
                            </button>
                        </div>` : ''}
                    </div>

                    <!-- Right Column: Creator Suite -->
                    <div class="bg-gradient-to-br from-red-50 to-blue-50 p-6 rounded-xl border-2 border-red-200 h-fit">
                        <h4 class="font-semibold text-lg mb-4 flex items-center text-slate-700"><i
                                class="fas fa-wand-magic-sparkles text-red-500 mr-2"></i> Creator Suite <span
                                class="ml-2 text-xs font-bold bg-red-500 text-white px-2 py-0.5 rounded-full">PRO</span></h4>
                        <div class="space-y-3">
                             <a href="/no-watermark.html"
                                class="flex items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:border-red-500 border border-transparent transition group">
                                <i class="fas fa-star text-yellow-400 mr-4"></i>
                                <div>
                                    <p class="font-semibold text-slate-800">AI Watermark Removal</p>
                                    <p class="text-sm text-slate-500">Perfect for TikTok & Reels</p>
                                </div>
                            </a>
                             <a href="/pricing.html"
                                class="flex items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md hover:border-red-500 border border-transparent transition group">
                                <i class="fas fa-star text-yellow-400 mr-4"></i>
                                <div>
                                    <p class="font-semibold text-slate-800">AI Transcript Generation</p>
                                    <p class="text-sm text-slate-500">Boost your SEO & accessibility</p>
                                </div>
                            </a>
                            <a href="/pricing.html"
                                class="block text-center mt-4 bg-slate-800 text-white font-semibold py-3 rounded-lg hover:bg-slate-900 transition-all duration-300 transform hover:-translate-y-0.5">Unlock
                                Pro Features</a>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        // Autofocus on load
        window.addEventListener('DOMContentLoaded', () => {
            const articleInput = document.getElementById('shorts-input'); // Renamed to avoid scope conflict
            articleInput && articleInput.focus();
        });

        // This script is for the main page downloader, it might not find all elements on this article page.
        // It's safe to keep but we wrap it in checks to avoid errors.
        if (document.getElementById('shorts-input')) {
            // Input events
            input.addEventListener('input', () => {
                clearError();
                clearInputBtn.classList.toggle('hidden', !input.value);
            });
            input.addEventListener('paste', () => {
                setTimeout(() => {
                    if (input.value && isValidYouTubeUrl(input.value)) {
                        downloadButton.click();
                    }
                }, 100);
            });
            clearInputBtn.addEventListener('click', () => {
                input.value = '';
                clearError();
                clearInputBtn.classList.add('hidden');
                resultSection.classList.add('hidden');
                input.focus();
            });

            // Main form submit
            downloadButton.addEventListener('click', async (e) => {
                e.preventDefault();
                const value = input.value;
                if (!isValidYouTubeUrl(value)) {
                    showError('Please enter a valid YouTube link.');
                    return;
                }
                clearError();
                setLoading(true);
                resultSection.classList.remove('hidden');
                resultSection.innerHTML = renderSkeleton();
                resultSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

                try {
                    const apiUrl = `https://ytdlp.vistaflyer.com/api/get-formats?url=${encodeURIComponent(value)}`;
                    const response = await fetch(apiUrl);

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => null);
                        throw new Error(errorData?.error || `API responded with status: ${response.status}`);
                    }
                    const data = await response.json();
                    if (data && data.formats && data.formats.length > 0) {
                        resultSection.innerHTML = renderResults(data, value);
                        // Add event listener for the "Show all" button after content is rendered
                        const toggleBtn = document.getElementById('toggle-downloads');
                        if (toggleBtn) {
                            const totalFormats = data.formats.length;
                            toggleBtn.addEventListener('click', () => {
                                const extraOptions = document.querySelectorAll('.extra-option');
                                const isHidden = extraOptions.length > 0 && extraOptions[0].classList.contains('hidden');
                                extraOptions.forEach(option => option.classList.toggle('hidden'));
                                if (isHidden) {
                                    toggleBtn.innerHTML = `Show less <i class="fas fa-chevron-up text-xs ml-1"></i>`;
                                } else {
                                    toggleBtn.innerHTML = `Show all ${totalFormats} formats <i class="fas fa-chevron-down text-xs ml-1"></i>`;
                                }
                            });
                        }
                    } else {
                        throw new Error(data.error || 'No downloadable formats found for this video.');
                    }

                } catch (error) {
                    console.error('Fetch formats error:', error);
                    const errorMessage = `Failed to get video info: ${error.message}. Please check the link or try again.`;
                    showError(errorMessage);
                    resultSection.innerHTML = `<div class="text-red-600 p-4 bg-red-50 rounded-lg">${errorMessage}</div>`;
                } finally {
                    setLoading(false);
                }
            });

            // Event Delegation for individual Download Buttons
            resultSection.addEventListener('click', async (e) => {
                const downloadBtn = e.target.closest('.download-link-btn');
                if (!downloadBtn) return; // Exit if the clicked element is not a download button

                const { url, formatId, title, filename } = downloadBtn.dataset;
                const originalHtml = downloadBtn.innerHTML;

                try {
                    downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span class="ml-2">Downloading...</span>';
                    downloadBtn.disabled = true;

                    const response = await fetch('https://ytdlp.vistaflyer.com/api/download-by-format', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            url: url,
                            format_id: formatId,
                            title: title
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`Server responded with status ${response.status}`);
                    }

                    const blob = await response.blob();
                    const blobUrl = window.URL.createObjectURL(blob);

                    // Create a temporary anchor to trigger the download
                    const tempLink = document.createElement('a');
                    tempLink.href = blobUrl;
                    tempLink.setAttribute('download', filename);
                    document.body.appendChild(tempLink);
                    tempLink.click();

                    // Cleanup
                    document.body.removeChild(tempLink);
                    window.URL.revokeObjectURL(blobUrl);

                } catch (error) {
                    console.error('Download error:', error);
                    alert('Download failed. Please check the console for more details and try again.');
                } finally {
                    // Reset button state
                    downloadBtn.innerHTML = originalHtml;
                    downloadBtn.disabled = false;
                }
            });
        }


        // Mobile drawer logic
        function openDrawer() {
            mobileDrawer.classList.remove('translate-x-full');
            mobileBackdrop.classList.remove('backdrop-hidden');
            mobileBackdrop.classList.add('backdrop-show');
            mobileMenuBtn.setAttribute('aria-expanded', 'true');
            mobileDrawer.setAttribute('aria-hidden', 'false');
            document.body.classList.add('overflow-hidden');
        }
        function closeDrawer() {
            mobileDrawer.classList.add('translate-x-full');
            mobileBackdrop.classList.add('backdrop-hidden');
            mobileBackdrop.classList.remove('backdrop-show');
            mobileMenuBtn.setAttribute('aria-expanded', 'false');
            mobileDrawer.setAttribute('aria-hidden', 'true');
            document.body.classList.remove('overflow-hidden');
        }
        mobileMenuBtn.addEventListener('click', openDrawer);
        mobileMenuClose.addEventListener('click', closeDrawer);
        mobileBackdrop.addEventListener('click', closeDrawer);
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && mobileMenuBtn.getAttribute('aria-expanded') === 'true') closeDrawer();
        });
        const mq = window.matchMedia('(min-width: 768px)');
        function handleBpChange(e) {
            if (e.matches) closeDrawer();
        }
        mq.addEventListener ? mq.addEventListener('change', handleBpChange) : mq.addListener(handleBpChange);
    </script>



    <script>
        // 标志，确保脚本只加载一次
        let thirdPartyScriptsLoaded = false;

        // 创建一个函数来加载所有第三方脚本
        function loadThirdPartyScripts() {
            if (thirdPartyScriptsLoaded) {
                return;
            }
            thirdPartyScriptsLoaded = true;
            console.log("User interaction detected, loading third-party scripts...");

            // 1. 加载 Google Tag Manager (GTAG)
            const gtagScript = document.createElement('script');
            gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-Z6TQTL70L0';
            gtagScript.async = true;
            // GTAG 脚本加载完成后，再执行初始化代码
            gtagScript.onload = function () {
                window.dataLayer = window.dataLayer || [];
                function gtag() { dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-Z6TQTL70L0');
            };
            document.head.appendChild(gtagScript);

        }

        const userInteractionEvents = [
            "mousemove", "scroll", "keydown", "touchstart", "click"
        ];

        userInteractionEvents.forEach(function (event) {
            window.addEventListener(event, loadThirdPartyScripts, { once: true, passive: true });
        });

        setTimeout(loadThirdPartyScripts, 5000);
    </script>
</body>

</html>